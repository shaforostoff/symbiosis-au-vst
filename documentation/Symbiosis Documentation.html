<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
		<meta http-equiv="Content-Style-Type" content="text/css">
		<title>Symbiosis</title>
		<style type="text/css">
			table, th, td { border: 1px solid black; padding: 5px; border-collapse:collapse; }
			th { text-align: left }
			img { border: 0 none }
			html {background:#faf8f3;}body {min-width:650px;max-width:960px;_width:650px;color:#000;margin:0;font-family:'Cambria',Georgia,'Times New Roman',Times,serif;height:100%;overflow:visible;padding:36px;}table {line-height:18px;margin-bottom:17px;border:1px solid #ccc;border-collapse:collapse;border-bottom-color:#aaa;border-radius:2px;box-shadow:0px 1px 0 #ddd;-moz-border-radius:2px;-moz-box-shadow:0px 1px 0 #ddd;-webkit-box-shadow:0px 1px 0 #ddd;}tr { background:#fff;vertical-align:top;}th,tr:nth-child(even) { background:#eee;}td {border:1px dotted #ccc;padding:2px 18px 4px 9px;font-size:0.9em;}th {background:#ddd;border:1px solid #bbb;color:#000;font-weight:normal;padding:4px 18px 4px 9px;text-align:left;font-size:0.85em;}tr:nth-child(1) th {background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#ccc), to(#bbb));background:-moz-linear-gradient(top, #ccc, #bbb);border:1px solid #aaa;border-bottom-color:#999;border-top-color:#bbb;box-shadow:0px 1px 1px #ccc;-moz-box-shadow:0px 1px 1px #ccc;-webkit-box-shadow:0px 1px 1px #ccc;color:#333;padding:8px 18px 8px 9px;text-shadow:0 1px #ddd;}tt {color:#5d5d5d;padding-right:4px;padding-left:4px;}pre {border:1px solid #d0d0d0;overflow:auto;color:#5f5f5f;padding:0.4em;}ul {list-style-type:disc;padding-left:14px;list-style-position:inside;}h1,h2,h3,h4,h5,h6 {font-weight:bold;margin-bottom:18px;}h1,h2 { line-height:36px; }h3,h4 { line-height:18px; }h1 { font-size:2.0em; }h2 { font-size:1.5em; }h3 { font-size:1.3em; }h4 { font-size:1.2em; }h5 { font-size:1.1em; }h6 { font-size:1.0em; }a { text-decoration:none; }a[href]:hover { text-decoration:underline; }a sup{ font-size:0.7em; }	
		</style>
	</head>
	<body>
<p><img src="Symbiosis.png" alt=""></p>
<h1><a name="Symbiosis_v1.3">Symbiosis v1.3</a></h1>
<h2><a name="Table_of_Contents">Table of Contents</a></h2>

<ul>
<li><a href="#What_Is_Symbiosis?">What Is Symbiosis?</a><br></li>
<li><a href="#How_Does_It_Work?">How Does It Work?</a><br></li>
<li><a href="#Who_Is_It_For?">Who Is It For?</a><br></li>
<li><a href="#What_Does_It_Cost?">What Does It Cost?</a><br></li>
<li><a href="#What_Are_the_Prerequisites?">What Are the Prerequisites?</a><br></li>
<li><a href="#What_Are_the_Major_Differences_Between_VST_and_AU?">What Are the Major Differences Between VST and AU?</a><br></li>
<li><a href="#Wrapping_Alternatives">Wrapping Alternatives</a><br>
<ul>
<li><a href="#Wrapping_the_VST_Using_Alternatives_1_or_2">Wrapping the VST Using Alternatives 1 or 2</a><br></li>
<li><a href="#Wrapping_the_VST_Using_Alternatives_3,_4_or_5">Wrapping the VST Using Alternatives 3, 4 or 5</a></li>
</ul>
</li>
<li><a href="#Running_Your_AU_for_the_First_Time">Running Your AU for the First Time</a></li>
<li><a href="#Advanced_Porting_Options">Advanced Porting Options</a><br>
<ul>
<li><a href="#SYParameters.txt">SYParameters.txt</a><br></li>
<li><a href="#SYFactoryPresets.txt">SYFactoryPresets.txt</a><br></li>
<li><a href="#Vendor-Specific_Extensions">Vendor-Specific Extensions</a></li>
</ul>
</li>
<li><a href="#Preprocessor_Defines">Preprocessor Defines</a></li>
<li><a href="#Copyrights_and_Trademarks">Copyrights and Trademarks</a></li>
</ul>
<h2><a name="What_Is_Symbiosis?">What Is Symbiosis?</a></h2>
<p>Symbiosis is a developer tool for adapting Mac OS X VST plug-ins to the Audio Unit (AU) standard. It essentially consists of a single C++ file that you can compile into your VST project to make the plug-in compatible with the Audio Unit protocol. Optionally, you may choose to use a pre-built "wrapper plug-in" for adapting your existing VST plug-in to the AU standard without even having to recompile any source code.</p>
<h2><a name="How_Does_It_Work?">How Does It Work?</a></h2>
<p>Although the VST and Audio Unit SDKs differ greatly in implementation, the purpose and functions of the two standards are virtually identical. Both protocols provide means for querying plug-in info and capabilities, processing floating- point audio, reading and writing automation parameters, serializing the plug-in state for total recall and managing GUI interaction.</p>
<p>The close affinity of the two standards makes it possible to create a "wrapper" that works on "binary level", meaning that it translates messages to and from the AU host and VST plug-in in real-time.</p>
<p>The translation works transparently for perhaps 90% of the Audio Unit functionality. Where the AU and VST standards differ greatly or where the former offers valuable features not found in the latter, Symbiosis offer configuration files and optional code extensions that allow you to create feature-complete Audio Units, true to the philosophies and principles of the architecture.</p>
<p>You can also configure Symbiosis to automatically convert preset files it discovers from the VST format (".fxb" and ".fxp" files) to the AU format (".aupreset" files).</p>
<h2><a name="Who_Is_It_For?">Who Is It For?</a></h2>
<p>This is a tool for developers. It was not designed to be used by end-users. The idea is that Symbiosis is packaged into the final product, either compiled into the product on source-code level or as a "wrapper" that bridges to your VST.</p>
<p>Symbiosis will be of great interest to you if you already have a VST plug-in running under Mac OS X and you now wish to support the Audio Unit format. With Symbiosis, there is no need to master and implement the Audio Unit interface yourself. Although plenty of documentation and examples are available for learning the art of Audio Unit coding, it is far from trivial to understand all aspects and details of this fairly complex API. Add to this the continuous work of supporting and maintaining the source code for two different plug-in interfaces and the advantage of using Symbiosis should be obvious.</p>
<p>The availability of Symbiosis may also makes VST a good choice as a first plug-in format for the beginner Mac developer who one day plan to port his / her plug-in to the VST-dominant environment of Windows.</p>
<h2><a name="What_Does_It_Cost?">What Does It Cost?</a></h2>
<p>Nothing. Symbiosis is released as open source under the BSD license form (see <a href="#Copyrights_and_Trademarks">Copyrights and Trademarks</a>).</p>
<p>I (Magnus Lidstr&ouml;m) developed Symbiosis partly because I needed such a tool for my own use, but also because I felt that all developers would benefit from a unified plug-in world with a single standard API. We will probably never be able to change the fact that certain hosts only work with certain plug-in formats, but at least, Symbiosis will make it feasible to support two of these formats with a minimal amount of overhead in code, work and continuous maintenance.</p>
<p>My only request if you find this tool useful is that you spread the word, preferably by adding an acknowledgment in your product documentation, "about box" or any other promotional material. For example, "Audio Unit version implemented using Symbiosis from NuEdge Development."</p>
<p>My dear friends over at Bitplant (<a href="http://www.bitplant.com/">http://www.bitplant.com/</a>) have also designed a very stylish logo that I would be thrilled if you used. You can find it (and other related logotypes) at <a href="http://fogbugz.nuedge.net/default.asp?W101">http://fogbugz.nuedge.net/default.asp?W101</a>.</p>
<h2><a name="What_Are_the_Prerequisites?">What Are the Prerequisites?</a></h2>
<p>The minimum requirement is that you have the Apple OS X development tools and the CoreAudio SDK installed. (Configuring Symbiosis for your product requires at least using the "Rez" tool in order to compile the required AU "component resources".)</p>
<p>If you wish to compile the Symbiosis "wrapper plug-in" project, you will need XCode 2.5 or later. The VST SDK from Steinberg is required to compile Symbiosis as well, but due to licensing restrictions, the source files from this SDK are not included in this distribution but must be obtained separately from Steinberg and added to the project manually.</p>
<h2><a name="What_Are_the_Major_Differences_Between_VST_and_AU?">What Are the Major Differences Between VST and AU?</a></h2>
<p>In case you are new to Audio Units but familiar with VST, the following list is provided as a crash course on the differences between the two formats.</p>

<ul>
<li>AUs are component resources, scanned and indexed by OS X unlike VSTs which are scanned by each VST host individually. 
</li>
</ul>

<ul>
<li>AU parameters are identified with arbitrary 32-bit IDs (instead of incrementally indexed from 0 and up).</li>
</ul>

<ul>
<li>AU parameters have more meta info (ranges, types and even string arrays for discrete parameter choices).</li>
</ul>

<ul>
<li>There is no concept like the VST "program slots" in AU, but AUs may provide a list of read-only factory presets.</li>
</ul>

<ul>
<li>AUs can convert arbitrary parameter values to and from strings at any given time. (VSTs can only convert the currently assigned parameter values.)
</li>
</ul>

<ul>
<li>AUs have silent buffer optimizations.</li>
</ul>

<ul>
<li>AU inputs and outputs are grouped into buses and the same AU plug-in can provide a number of input and output configurations.
<br><br></li>
<li>AU GUIs must be implemented with HIViews. (This has become the standard for VSTs too, but previously VSTs had a different user input / window drawing mechanism.)
</li>
</ul>
<p>Symbiosis supports all unique AU features mentioned above.</p>
<h2><a name="Wrapping_Alternatives">Wrapping Alternatives</a></h2>
<p>So, you have a VST plug-in that you want to metamorphose into an Audio Unit? How do you begin? First, you need to decide how you wish to wrap your VST.</p>

<ol>
<li><b>Using the pre-built wrapper AU component and placing an alias to your VST inside the wrapper bundle</b><br><br>The advantage of this solution is that the same physical binary is used for both the VST and AU version. This means
 that your plug-in will be smaller to download and will take up less space on the user's disk once it has been
 installed. It also simplifies version handling as you will only need to build and update one single binary for both
 formats.
<br><br>The disadvantage is that the AU-version is not 100% self-contained and the end-user can break it if he / she
 uninstalls or throws away the VST. (Nevertheless, this approach may be the best choice during development even if you
 choose to wrap the final product using one of the other solutions.)
<br><br><img src="Symbiosis Wrap Alt 1.png" alt="">
<br><br><br></li>
<li><b>Using the pre-built wrapper AU component and placing a copy of your VST inside the wrapper bundle</b><br><br>This approach is almost identical to alternative number 1 except that the VST bundle is "physically" duplicated
 inside the AU bundle. The advantage of choosing this solution is that the AU-version becomes self-contained. If your
 plug-in is small, this alternative should be preferred to alternative number 1, at least when you are packaging the
 final product.
<br><br><img src="Symbiosis Wrap Alt 2.png" alt="">
<br><br><br></li>
<li><b>Adding the Symbiosis sources to your VST project and copy + change extension</b><br><br>By simply adding the Symbiosis source code and a few libraries and resource files to your VST project, the compiled
 VST binary becomes compatible with both the VST and the AU standards simultaneously. How cool is that? All you need
 to do is copy the final <tt>.vst</tt> bundle to the "Components folder" and rename it to <tt>.component</tt>. The advantages and
 disadvantages of choosing this solution are practically the same as for alternative number 2. The difference is that
 the Symbiosis wrapper gets compiled into the product binary (with the same build options etc as your own code).
<br><br><img src="Symbiosis Wrap Alt 3.png" alt="">
<br><br><br></li>
<li><b>Adding the Symbiosis sources to your project and place an alias to your VST in the "Components folder"</b><br><br>Apparently, the AU scanning in OS X resolves any aliases it encounters, so the components don't have to actually
 reside in the "Component folder". All you need to do is make an alias of your <tt>.vst</tt>, give the alias a <tt>.component</tt>
 extension and place the alias in the "Components folder". The advantages and disadvantages is the same as for
 alternative number 1. E.g., it takes up less space on disk, but the AU will not work if the user removes the VST etc.
<br><br>Also, this solution depends on an undocumented OS X feature (support for aliases in the "Components folder"). No
 guarantees that it will work under all circumstances for all future.
<br><br><img src="Symbiosis Wrap Alt 4.png" alt="">
<br><br><br></li>
<li><b>Creating a specific build target for the Audio Unit version</b><br><br>This alternative is identical to number 3, but instead of having a single "unisex" target you create specific
 targets for the VST and the AU versions and include the Symbiosis source code only to the AU target. The disadvantage
 is that the build-time practically doubles if you wish to build both formats. The only reason for choosing this
 alternative over number 3 is if you need to treat the AU version differently on source code level (for instance with
 preprocessor macros).
<br><br>I would recommend avoiding this solution though. Keeping the number of different binary versions down to a minimum
 is always good for build times, debugging, testing and maintenance. If you need to treat the AU differently from the
 VST in run-time you can always check if the VST host is "Symbiosis" through the <tt>getHostProductString</tt> VST call.
<br><br><img src="Symbiosis Wrap Alt 5.png" alt="">
<br></li>
</ol>
<h3><a name="Wrapping_the_VST_Using_Alternatives_1_or_2">Wrapping the VST Using Alternatives 1 or 2</a></h3>
<p>If you have chosen wrapping alternative 1 or 2 (using a pre-built wrapper) the first step is to duplicate one of the pre-built wrappers (<tt>Symbiosis.component</tt>) from the zip-file <tt>PreBuiltWrappers.zip</tt>. The "development" and "beta" versions contain tracing and assertions that are written to the standard <tt>console.log</tt> (which you can observe with the "Console" application)<a href="#fn0001"><sup>*</sup></a>. The "beta" and "release" versions are compiled with optimizations and are faster than the "development" version, although they may be harder to debug. All pre-built wrappers are built as universal binaries for x86 (32 and 64-bit) and PPC. First time around you should choose the "development" or "beta" builds.</p>
<p>Rename your wrapper to whatever you wish to call your plug-in and add an alias (or copy) your VST plug-in to the bundle. The VST file or alias should be put under <tt>Contents/Resources/</tt> in the wrapper bundle.</p>
<p>Audio Units are based on the component API (as used by QuickTime) and components are identified by the operating system using classic Mac resources. Therefore, the next step is to edit and recompile these resources for your AU. Open the sample <tt>.rez`-file (`Symbiosis.r</tt>) that is included in the distribution under <tt>Contents/Resources/</tt> and modify it according to the instructions inside (don't rename the file!).</p>
<p>You then need to compile <tt>Symbiosis.r</tt> into <tt>Symbiosis.rsrc</tt> by using the "Rez" tool. There is a script included in the distribution called <tt>CompileSymbiosisRsrc.command</tt> that helps you with this step. Locate the script next to your modified <tt>Symbiosis.r</tt> file and double-click it (if you can't run the script you may need to perform a <tt>chmod +x</tt> on the script file from a shell prompt). Now look for <tt>Symbiosis.rsrc</tt>. Found it? Excellent!</p>
<p>Finally, you also need to edit the OS X <tt>Info.plist</tt> and fill out the standard bundle version info plus choose a few Symbiosis specific configuration options. <tt>Info.plist</tt> is located inside your wrapper bundle under <tt>Contents/</tt>. It contains comments with further instructions. (You may need to open <tt>Info.plist</tt> with a text-editor like <tt>TextEdit</tt> to see the comments.)</p>
<p>Move on to <a href="#Running_Your_AU_for_the_First_Time">Running Your AU for the First Time</a>.</p>
<p><small><a name="fn0001"><sup>*</sup> Notice that the standard assertion handling in C++ simply terminates the entire application if something fails. If the application terminates during beta testing, always check <tt>console.log</tt> for the reason. If you build your own wrapper you may want to use a custom assertion mechanism. See <a href="#Preprocessor_Defines">Preprocessor Defines</a> for more info.</a></small></p>
<h3><a name="Wrapping_the_VST_Using_Alternatives_3,_4_or_5">Wrapping the VST Using Alternatives 3, 4 or 5</a></h3>
<p>If you have chosen one of the latter wrapping alternative (i.e. including the Symbiosis source in your project) you should first make sure that you have a "Build ResourceManager Resources" Build Phase for your target. If there is no such Phase, create one by choosing "New Build Phase -&gt; New Build ResourceManager Resources Build Phase" from the "Project" menu. Now you can copy and add the following files to your VST project:</p>

<ul>
<li>Symbiosis.mm<br></li>
<li>Symbiosis.r (make sure it also appears under the "Build ResourceManager Resources" Build Phase)<br></li>
<li>AudioUnit.framework (from <tt>/System/Library/Frameworks/</tt>)<br></li>
<li>AudioToolbox.framework (from <tt>/System/Library/Frameworks/</tt>)</li>
</ul>
<p>Edit your copy of <tt>Symbiosis.r</tt> according to the instructions inside. Next, add the Symbiosis specific configuration options found in <tt>Symbiosis.plist</tt> to the <tt>Info.plist</tt> file that should already exist for your VST project (you may have called it something else though). You will find more instructions in the <tt>Symbiosis.plist</tt> file. (You may need to open <tt>Symbiosis.plist</tt> with a text-editor like <tt>TextEdit</tt> to see the comments.)</p>
<p>If you have a custom "exported symbols file" for your project, you need to add these entries to it:</p>

<ul>
<li>_SymbiosisEntry<br></li>
<li>_SymbiosisViewEntry.</li>
</ul>
<br>One more thing, if you are targetting 64-bit you need to have a special header file that defines a unique class prefix.
 Objective-C has a flat name space. This is far from ideal for plug-ins. Each unique class must have a unique name and we
 accomplish this through the use of some clever macros. These macros require a prefix that you must define in
 <tt>SymbiosisClassPrefix.h</tt>. Here is an example definition:
<pre>#define SY_CLASS_PREFIX comsonicchargebitspeek102<br></pre>
<p>Or even better, add a "Run Script Build Phase" to your target(s), enter the following script:</p>
<pre>date "+#define SY_CLASS_PREFIX netnuedgesymbiosis%Y%m%d%H%M%S" &gt;${SOURCE_ROOT}/SymbiosisClassPrefix.h<br></pre>
<p>Move this Build Phase to the top so that it is executed at the beginning of the compilation. Now we are virtually guaranteed to obtain a unique prefix for every unique build.</p>
<p>That's about it. Just make sure to build your plug-in without the NDEBUG setting the first time around as explained in the next section.</p>
<h2><a name="Running_Your_AU_for_the_First_Time">Running Your AU for the First Time</a></h2>
<p>Now let us fire up the engines and take your AU for a spin. A good idea for the first tour is to make sure your plug-in passes the "AU validation tests" by using the "AUVal" tool from Apple ("AUVal" should come preinstalled with OS X or with the development tools). If it does not pass, some hosts will not load your Audio Unit. Although Symbiosis will do its best to assure that your adapted VST passes validation, there is no guarantee that your VST code is 100% compatible without modification. (For example, there are a few tweakable configuration settings and vendor-specific VST extensions that may affect the outcome of the validation.)</p>
<p>First, put your AU component in <tt>Library/Audio/Plug-Ins/Components/</tt> either in the root (system-wide) or your home dir (local). Next, open up the terminal application and type <tt>auval -a</tt>. Look for your unique AU signature (the one you chose for your <tt>.r</tt> file). If you cannot see it, you may need to restart the computer for the OS to discover the new AU. If this still fails, something has gone seriously wrong with your wrapping. Start over from square 1 and try a different wrapping alternative as a test. </p>
<p>Now run <tt>auval -v &lt;type&gt; &lt;subtype&gt; &lt;signature&gt;</tt> where <tt>&lt;type&gt;</tt>, <tt>&lt;subtype&gt;</tt> and <tt>&lt;signature&gt;</tt> should be the ones defined in the <tt>.r</tt> file. (<tt>&lt;type&gt;</tt> is typically one of <tt>aufx</tt>, <tt>aumu</tt> or <tt>aumf</tt> for "instrument", "effect" and "effect with MIDI"). Hold your breath and pray for your plug-in to pass the tests.</p>
<p>Important! When you run the development or beta build of your AU for the first time, the wrapper automatically creates a few important configuration files inside your component bundle under <tt>Contents/Resources/</tt> as well as ".aupresets" files for the default / initial VST program bank. You should distribute your Audio Units with these files pre-created, even if you do not modify them. Otherwise they will be created on the end-user's computer on the first run and in case the user doesn't have sufficient write privileges for the directory in question, this can prevent the Audio Unit from loading. The release build (when NDEBUG is defined) will never attempt to create these files. See <a href="#Advanced_Porting_Options">Advanced Porting Options</a> for more info on these files.</p>
<h2><a name="Advanced_Porting_Options">Advanced Porting Options</a></h2>
<p>Symbiosis creates two configuration files inside your AU bundle the first time it is launched. <tt>SYParameters.txt</tt> and <tt>SYFactoryPresets.txt</tt>. It will also create <tt>.aupreset</tt> files for all the VST programs in the initial startup bank. All these files are created directly under <tt>Contents/Resources/</tt> in your bundle.</p>
<p>It is a good idea to edit at least <tt>SYParameters.txt</tt> and you should include all the created files in the final distribution of your Audio Unit. (Please read an important note concerning this under <a href="#Running_Your_AU_for_the_First_Time">Running Your AU for the First Time</a>.) If you are using wrapping alternative 3, 4 or 5 (including Symbiosis.mm etc into your VST project) you can simply drop the files into your project and they will be copied in the build process.</p>
<p>Finally, if you are serious about creating a fully featured Audio Unit you might want to look into supporting Symbiosis' optional <a href="#Vendor-Specific_Extensions">Vendor-Specific Extensions</a> below.</p>
<h3><a name="SYParameters.txt">SYParameters.txt</a></h3>
<p>This file is a tab separated table with parameter information. One line per parameter with an extra header line at the top. You may choose to exclude certain parameters from the AU version by simply removing the corresponding lines from this file.</p>
<p>The columns in this file are as follows:</p>
<table>
<tr>
<th>Column</th><th>Description</th>
</tr>
<tr>
<td>vst param #</td><td>The VST parameter number (zero based), which is also the unique identifier for the parameter.<a href="#fn0002"><sup>*</sup></a></td>
</tr>
<tr>
<td>name</td><td>The parameter name as shown to the end user.<a href="#fn0003"><sup>**</sup></a></td>
</tr>
<tr>
<td>min</td><td>The minimum parameter value.<a href="#fn0004"><sup>***</sup></a></td>
</tr>
<tr>
<td>max</td><td>The maximum parameter value.<a href="#fn0004"><sup>***</sup></a></td>
</tr>
<tr>
<td>display</td><td>A string that defines how the parameter is displayed to the end user. Use one of the following:</td>
</tr>
<tr>
<td>&nbsp;</td><td><tt>=</tt> for linear scaling (within the <tt>min</tt> to <tt>max</tt> range).</td>
</tr>
<tr>
<td>&nbsp;</td><td><tt>b</tt> for boolean switch (0 is off, 1 is on)</td>
</tr>
<tr>
<td>&nbsp;</td><td>a|b|c|d for discrete parameter settings, e.g. <tt>sine|tri|saw|pulse</tt></td>
</tr>
<tr>
<td>&nbsp;</td><td><tt>?</tt> to convert the value with the <a href="#Vendor-Specific_Extensions">Vendor-Specific Extensions</a> (described below).</td>
</tr>
<tr>
<td>unit</td><td>The parameter suffix / unit.</td>
</tr>
<tr>
<td>default</td><td>The initial default setting. (Scaled according to <tt>min</tt> and <tt>max</tt> range.)</td>
</tr>
</table>
<p><small><a name="fn0002"><sup>*</sup> If changes to this parameter will automatically modify other parameters you need to suffix this column with <tt>+</tt>. This information is important for AU hosts.</a></small></p>
<p><small><a name="fn0003"><sup>**</sup> You may wish to edit this column as AU can handle longer parameter names than VST.</a></small></p>
<p><small><a name="fn0004"><sup>***</sup> VST parameter values are always between 0 and 1, but AU parameters have arbitrary range. The min and max values are used to scale and normalize the AU parameter range from / to the 0 and 1 range. For discrete parameters (those having <tt>|</tt> -delimited lists in the <tt>display</tt> column) the <tt>min</tt> value must be 0 and the <tt>max</tt> value should be the count of discrete options minus one, e.g. <tt>3</tt> if there are four choices.</a></small></p>
<h3><a name="SYFactoryPresets.txt">SYFactoryPresets.txt</a></h3>
<p>This file simply contains a list of factory preset files (one file name per row). You can edit this file to remove or add factory presets. Symbiosis expects to find the factory preset files under <tt>Contents/Resources/</tt> (as always).</p>
<h3><a name="Vendor-Specific_Extensions">Vendor-Specific Extensions</a></h3>
<p>For the full AU end-user experience, the VST standard lacks just a few minor functions, namely text conversion to and from arbitrary parameter values (and not just from the currently assigned settings) and silent buffer detection (for CPU optimization). Luckily there is a method in the VST SDK for custom extensions that allows Symbiosis to support these features if you should choose to implement the required support on your side. The method is <tt>vendorSpecific</tt> and it receives two generic integers, one void pointer and a float. Symbiosis uses the first integer (<tt>lArg1</tt>) as a 32-bit four-character value to indicate which function it expects you to perform. These are the functions:</p>
<table>
<tr>
<th>lArg1</th><th>Description</th><th>lArg2</th><th>ptrArg</th><th>Return</th>
</tr>
<tr>
<td><tt>'sHi!'</tt></td><td>Do you support these extensions?</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td>
</tr>
<tr>
<td><tt>'sI00'</tt></td><td>Is input for the next processing call silent or not (all zeroes).<a href="#fn0005"><sup>*</sup></a></td><td>1 if silent</td><td>&nbsp;</td><td>1</td>
</tr>
<tr>
<td><tt>'sO00'</tt></td><td>Is your output from the last processing call silent (all zeroes)?<a href="#fn0005"><sup>*</sup></a></td><td>&nbsp;</td><td>&nbsp;</td><td>1 if silent</td>
</tr>
<tr>
<td><tt>'sV2S'</tt></td><td>Convert parameter value to string.</td><td>VST param #</td><td>float &amp; string pointer<a href="#fn0006"><sup>**</sup></a></td><td>1</td>
</tr>
<tr>
<td><tt>'sS2V'</tt></td><td>Convert parameter string to value.</td><td>VST param #</td><td>string &amp; float pointer<a href="#fn0006"><sup>**</sup></a></td><td>1</td>
</tr>
</table>
<p><small><a name="fn0005"><sup>*</sup> The silent flags should be considered as hints only. The input and output data is expected to be fully zeroed if the flag is set.</a></small></p>
<p><small><a name="fn0006"><sup>**</sup> <tt>ptrArg</tt> will point to a buffer of a sufficiently large size to store both input and output of the conversion. On value to string conversion, <tt>ptrArg</tt> will point to a floating point value on input and expects you to copy a zero- terminated string to this pointer on output (and vice versa for string to value conversion).</a></small></p>
<p>As always, the best explanation is an example. This is from the example plug-in "Sinoplex" that is provided with Symbiosis.</p>
<pre>VstIntPtr Sinoplex::vendorSpecific(VstInt32 lArg1, VstIntPtr lArg2, void* ptrArg, float floatArg) {<br>    switch (lArg1) {<br>        case 'sHi!': return 1;                                                                                      // Can we speak Symbiosian?<br>        case 'sI00': inputIsSilent = (lArg2 != 0); return 1;                                                        // Is input silent?<br>        case 'sO00': return outputIsSilent;                                                                         // Is output silent?<br>        <br>        case 'sV2S': {                                                                                              // Parameter value to string conversion.<br>            float value = *reinterpret_cast&lt;float*&gt;(ptrArg);<br>            SinoplexProgram::Parameter param = static_cast&lt;SinoplexProgram::Parameter&gt;(lArg2);<br>            currentProgram-&gt;convertParameterValueToString(param, value, reinterpret_cast&lt;char*&gt;(ptrArg));<br>            return 1;<br>        }<br>        <br>        case 'sS2V': {                                                                                              // String to parameter value conversion.<br>            SinoplexProgram::Parameter param = static_cast&lt;SinoplexProgram::Parameter&gt;(lArg2);<br>            float value = currentProgram-&gt;convertParameterStringToValue(param, reinterpret_cast&lt;char*&gt;(ptrArg));<br>            *reinterpret_cast&lt;float*&gt;(ptrArg) = value;<br>            return 1;<br>        }<br>    <br>        default: return AudioEffectX::hostVendorSpecific(lArg1, lArg2, ptrArg, floatArg);<br>    }<br>}<br></pre>
<h2><a name="Preprocessor_Defines">Preprocessor Defines</a></h2>
<p>These are the preprocessor macros used to configure Symbiosis.mm.</p>
<table>
<tr>
<th>Macro</th><th>Description</th><th>Alternatives</th><th>Default</th>
</tr>
<tr>
<td>SY_USE_VST_VERSION</td><td>VST SDK version to include</td><td>2300, 2400</td><td>2400 or automatically detected if the VST SDK is included in the precompiled headers.</td>
</tr>
<tr>
<td>SY_DO_ASSERT</td><td>Enable assertion checks</td><td>0, 1</td><td>1 or 0 if NDEBUG is defined</td>
</tr>
<tr>
<td>SY_STD_ASSERT</td><td>Use standard C assert()</td><td>0, 1</td><td>1</td>
</tr>
<tr>
<td>SY_ASSERT(x)</td><td>Macro for asserts without details</td><td>&nbsp;</td><td>assert() if SY_STD_ASSERT == 1</td>
</tr>
<tr>
<td>SY_ASSERT0..n(x, d, ...)</td><td>Macros for asserts with details</td><td>&nbsp;</td><td>first trace out the details, then assert</td>
</tr>
<tr>
<td>SY_DO_TRACE</td><td>Tracing "master switch"</td><td>0, 1</td><td>1 or 0 if NDEBUG is defined</td>
</tr>
<tr>
<td>SY_TRACE_EXCEPTIONS</td><td>Trace caught exceptions</td><td>0, 1</td><td>1</td>
</tr>
<tr>
<td>SY_TRACE_AU</td><td>Trace AU messages / calls</td><td>0, 1</td><td>1</td>
</tr>
<tr>
<td>SY_TRACE_VST</td><td>Trace VST messages / calls</td><td>0, 1</td><td>1</td>
</tr>
<tr>
<td>SY_TRACE_FREQUENT</td><td>Trace frequent calls (e.g. render)</td><td>0, 1</td><td>0</td>
</tr>
<tr>
<td>SY_TRACE_MISC</td><td>Trace misc</td><td>0, 1</td><td>0</td>
</tr>
<tr>
<td>SY_STD_TRACE</td><td>Trace to stderr</td><td>0, 1</td><td>1</td>
</tr>
<tr>
<td>SY_TRACE(c, s)</td><td>Macro for tracing a string</td><td>&nbsp;</td><td>prints to stderr if SY_STD_TRACE == 1</td>
</tr>
<tr>
<td>SY_TRACE1..n</td><td>Macros for tracing with arguments</td><td>&nbsp;</td><td>- " -</td>
</tr>
<tr>
<td>SY_INCLUDE_GUI_SUPPORT</td><td>Include support for custom GUI</td><td>0, 1</td><td>1</td>
</tr>
<tr>
<td>SY_INCLUDE_CONFIG_GEN</td><td>Include config file generation</td><td>0, 1</td><td>1 or 0 if NDEBUG is defined</td>
</tr>
<tr>
<td>SY_USE_COCOA_GUI</td><td>Use Cocoa Views for GUI</td><td>0, 1</td><td>0 in 32-bit, 1 in 64-bit</td>
</tr>
</table>
<p>Most of these can be overridden by redefining them in your build settings or in a "prefix header file".</p>
<h2><a name="Copyrights_and_Trademarks">Copyrights and Trademarks</a></h2>
<p>Symbiosis is released under the "New Simplified BSD License". <br>
<a href="http://www.opensource.org/licenses/bsd-license.php">http://www.opensource.org/licenses/bsd-license.php</a></p>
<p>Copyright (c) 2009-2011, NuEdge Development / Magnus Lidstr&ouml;m <br>
All rights reserved.</p>

<ul>
<li>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
</li>
</ul>

<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
</li>
</ul>

<ul>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
</li>
</ul>

<ul>
<li>Neither the name of the NuEdge Development nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
</li>
</ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<p>The HTML version of this document was created with PikaScript, (c) 2011 NuEdge Development. <br>
 <br>
Apple, Audio Units and OS X are trademarks of Apple Inc., registered in the U.S. and other countries. VST is a trademark of Steinberg Media Technologies GmbH. All other trademarks and brand identities are used for descriptive purposes only and remain the property of their respective owners.</p>

	</body>
</html>
